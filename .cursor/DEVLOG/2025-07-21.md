# 2025-07-21 개발 로그

## 1) 태스크 내용 한줄 요약
HTTPS 설정 및 CORS 문제 해결로 likorea.com 웹사이트 정상 배포 완료

## 2) 문제 정의와 결정 내역(Trade-off, 근거)

### 문제 상황
- 브라우저에서 HTTP로 접속 시 HTTPS로 자동 리다이렉트되는 HSTS 문제
- CORS 에러로 인한 API 호출 실패
- 프론트엔드와 백엔드 간 통신 문제

### 해결 과정
1. **HTTPS 설정**: Let's Encrypt SSL 인증서 발급으로 HSTS 문제 해결
2. **CORS 설정**: Nginx와 백엔드 서버의 CORS 헤더 통일
3. **환경변수 수정**: 프론트엔드에서 HTTPS URL 사용하도록 변경
4. **권한 설정**: Nginx가 프론트엔드 빌드 파일에 접근할 수 있도록 권한 조정

### 결정 근거
- HTTPS가 현대 웹 표준이므로 SSL 인증서 설정이 최선의 해결책
- CORS는 보안상 필요한 정책이므로 올바른 헤더 설정으로 해결
- 환경변수는 빌드 시점에 포함되므로 재빌드 필요

## 3) 다음 액션(TODO)
- [ ] 자동 배포 스크립트 테스트
- [ ] 모니터링 시스템 구축
- [ ] 백업 시스템 설정
- [ ] 성능 최적화 (이미지 압축, 코드 스플리팅 등)

## 4) 실험 로그 / POC 결과

### 성공한 작업들
- ✅ SSL 인증서 발급 및 설정
- ✅ Nginx CORS 헤더 설정
- ✅ 백엔드 서버 CORS 설정 수정
- ✅ 프론트엔드 환경변수 HTTPS로 변경
- ✅ PM2 프로세스 관리 설정
- ✅ 권한 문제 해결

### 테스트 결과
- ✅ `https://likorea.com/api/tags` - 정상 응답 (200 OK)
- ✅ `https://likorea.com/api/boards` - 정상 응답 (200 OK)
- ✅ CORS OPTIONS 요청 - 정상 응답 (204 No Content)
- ✅ 프론트엔드 빌드 - 성공
- ✅ Nginx 설정 - 문법 검사 통과

### 배포 스크립트 업데이트
- 자동화된 배포 프로세스 구축
- SSL 인증서 자동 설정 포함
- 권한 설정 자동화
- 모니터링 명령어 추가

### 문서화
- 상세한 배포 가이드 작성 (`DEPLOYMENT.md`)
- 문제 해결 섹션 포함
- 디버깅 명령어 정리
- 보안 고려사항 추가 