{"ast":null,"code":"var _jsxFileName = \"/Users/houkjang/likorea/frontend/src/components/Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport '../styles/Login.css';\nimport { BACKEND_URL } from '../config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoggedIn, setIsLoggedIn] = useState(!!localStorage.getItem('authToken'));\n  const handleLogin = async e => {\n    e.preventDefault();\n    try {\n      const response = await fetch(`${BACKEND_URL}/api/users/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`로그인 실패: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data.token) {\n        localStorage.setItem('authToken', data.token); // authToken 저장\n        localStorage.setItem('userId', data.userId); // 새로 추가: userEmail 저장\n        setIsLoggedIn(true);\n        console.log('로그인 성공, authChange 이벤트 디스패치'); // 로그 추가\n        window.dispatchEvent(new Event('authChange')); // Header 업데이트를 위해 이벤트 디스패치\n        // window.location.reload();  // 리로딩 제거\n      }\n    } catch (error) {\n      console.error('로그인 오류:', error);\n      // ...추가: 에러 메시지 처리...\n    }\n  };\n  const handleLogout = () => {\n    localStorage.removeItem('authToken');\n    setIsLoggedIn(false);\n    // ...추가: 리다이렉트 혹은 상태 업데이트...\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-container\",\n    children: !isLoggedIn ? /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"login-box\",\n      onSubmit: handleLogin,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uB85C\\uADF8\\uC778\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"\\uC774\\uBA54\\uC77C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          id: \"email\",\n          value: email,\n          onChange: e => setEmail(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"\\uBE44\\uBC00\\uBC88\\uD638\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"login-btn\",\n        children: \"\\uB85C\\uADF8\\uC778\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"signup-link\",\n        children: [\"\\uC544\\uC9C1 \\uD68C\\uC6D0\\uC774 \\uC544\\uB2C8\\uC2E0\\uAC00\\uC694? \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/signup\",\n          children: \"\\uD68C\\uC6D0\\uAC00\\uC785\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uC774\\uBBF8 \\uB85C\\uADF8\\uC778 \\uD558\\uC168\\uC2B5\\uB2C8\\uB2E4.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"login-btn\",\n        onClick: handleLogout,\n        children: \"\\uB85C\\uADF8\\uC544\\uC6C3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"Hy4/lv+tMH6i2k9+nIaOkzOdliM=\");\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","Link","BACKEND_URL","jsxDEV","_jsxDEV","Login","_s","email","setEmail","password","setPassword","isLoggedIn","setIsLoggedIn","localStorage","getItem","handleLogin","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","Error","status","data","json","token","setItem","userId","console","log","window","dispatchEvent","Event","error","handleLogout","removeItem","className","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","type","id","value","onChange","target","required","to","onClick","_c","$RefreshReg$"],"sources":["/Users/houkjang/likorea/frontend/src/components/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport '../styles/Login.css';\nimport { BACKEND_URL } from '../config';\n\nfunction Login() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoggedIn, setIsLoggedIn] = useState(!!localStorage.getItem('authToken'));\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await fetch(`${BACKEND_URL}/api/users/login`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password })\n      });\n      if (!response.ok) {\n        throw new Error(`로그인 실패: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data.token) {\n        localStorage.setItem('authToken', data.token); // authToken 저장\n        localStorage.setItem('userId', data.userId);  // 새로 추가: userEmail 저장\n        setIsLoggedIn(true);\n        console.log('로그인 성공, authChange 이벤트 디스패치'); // 로그 추가\n        window.dispatchEvent(new Event('authChange')); // Header 업데이트를 위해 이벤트 디스패치\n        // window.location.reload();  // 리로딩 제거\n      }\n    } catch (error) {\n      console.error('로그인 오류:', error);\n      // ...추가: 에러 메시지 처리...\n    }\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('authToken');\n    setIsLoggedIn(false);\n    // ...추가: 리다이렉트 혹은 상태 업데이트...\n  };\n\n  return (\n    <div className=\"login-container\">\n      {!isLoggedIn ? (\n        <form className=\"login-box\" onSubmit={handleLogin}>\n          <h2>로그인</h2>\n          <div className=\"form-group\">\n            <label htmlFor=\"email\">이메일</label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n            />\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">비밀번호</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n            />\n          </div>\n          <button type=\"submit\" className=\"login-btn\">로그인</button>\n          <div className=\"signup-link\">\n            아직 회원이 아니신가요? <Link to=\"/signup\">회원가입</Link>\n          </div>\n        </form>\n      ) : (\n        <div className=\"login-box\">\n          <h2>이미 로그인 하셨습니다.</h2>\n          <button type=\"button\" className=\"login-btn\" onClick={handleLogout}>로그아웃</button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}